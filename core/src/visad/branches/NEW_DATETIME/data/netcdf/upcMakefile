SUBPACKAGE	= netcdf

include ../../macros.make

GARBAGE		= plain.nc
SUBDIR_TARGETS	= in/default in/classes in/all in/clean \
		  out/default out/classes out/all out/clean \
		  units/default units/classes units/all units/clean
JAR_CLASSES	= *.class in/*.class out/*.class units/*.class
JARFILE		= visad.data.netcdf.jar

default:	in/default out/default units/default
all:		in/all out/all units/all
jar:		in/classes out/classes units/classes
clean:		in/clean out/clean units/clean

test:		small.test big.test pmsl.test #time.test

include ../../rules.make

.SUFFIXES:	.test .save .class .java .run .nc
.nc.run:
	CLASSPATH=$(ROOTDIR):$$CLASSPATH $(JAVA) \
	    $(PACKAGE_PREFIX)Plain $<

.nc.save:
	$(MAKE) -s $*.run >$@ 2>&1

.nc.test:
	$(MAKE) -s $*.run 2>&1 | diff -cw $*.save -

.nc.debug:
	$(JDB) -classpath $(ROOTDIR):$(NETCDF_JAR) $(PACKAGE_PREFIX)Plain $<

.class.save:
	$(MAKE) -s $*.run >$@ 2>&1

.class.test:
	$(MAKE) -s $*.run 2>&1 | diff -cw $*.save -

.class.run:
	CLASSPATH=$(ROOTDIR):$$CLASSPATH $(JAVA) $(PACKAGE_PREFIX)$* $<

StandardQuantityDB.class:	QuantityDBImpl.java

include depend
